{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nexport default function useKrakenPrices(pairs) {\n  _s();\n  const [prices, setPrices] = useState({});\n  useEffect(() => {\n    if (!pairs || pairs.length === 0) return;\n    const ws = new WebSocket(\"wss://ws.kraken.com/v2\");\n    ws.onopen = () => {\n      console.log(\"Connected to Kraken v2 WebSocket\");\n      ws.send(JSON.stringify({\n        method: \"subscribe\",\n        params: {\n          channel: \"ticker\",\n          symbol: pairs.map(p => p.toLowerCase())\n        }\n      }));\n    };\n    ws.onmessage = event => {\n      try {\n        const msg = JSON.parse(event.data);\n\n        // v2 ticker данни\n        if (msg.channel === \"ticker\" && msg.type === \"update\") {\n          const {\n            symbol,\n            last\n          } = msg.data[0];\n          setPrices(prev => ({\n            ...prev,\n            [symbol.toUpperCase()]: parseFloat(last).toFixed(2)\n          }));\n        }\n      } catch (e) {\n        console.error(\"Error parsing Kraken message:\", e);\n      }\n    };\n    ws.onclose = () => console.log(\"Kraken WebSocket closed\");\n    return () => ws.close();\n  }, [pairs]);\n  return prices;\n}\n_s(useKrakenPrices, \"AyDZng7+aEBipOGwqaguTBzobZI=\");","map":{"version":3,"names":["useEffect","useState","useKrakenPrices","pairs","_s","prices","setPrices","length","ws","WebSocket","onopen","console","log","send","JSON","stringify","method","params","channel","symbol","map","p","toLowerCase","onmessage","event","msg","parse","data","type","last","prev","toUpperCase","parseFloat","toFixed","e","error","onclose","close"],"sources":["C:/Users/User/Documents/Trading212/TradingSimulation/frontend/src/Cryptos/KrakenApi.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nexport default function useKrakenPrices(pairs) {\r\n    const [prices, setPrices] = useState({});\r\n\r\n    useEffect(() => {\r\n        if (!pairs || pairs.length === 0) return;\r\n\r\n        const ws = new WebSocket(\"wss://ws.kraken.com/v2\");\r\n\r\n        ws.onopen = () => {\r\n            console.log(\"Connected to Kraken v2 WebSocket\");\r\n            ws.send(JSON.stringify({\r\n                method: \"subscribe\",\r\n                params: {\r\n                    channel: \"ticker\",\r\n                    symbol: pairs.map(p => p.toLowerCase())\r\n                }\r\n            }));\r\n        };\r\n\r\n        ws.onmessage = (event) => {\r\n            try {\r\n                const msg = JSON.parse(event.data);\r\n\r\n                // v2 ticker данни\r\n                if (msg.channel === \"ticker\" && msg.type === \"update\") {\r\n                    const { symbol, last } = msg.data[0];\r\n                    setPrices(prev => ({\r\n                        ...prev,\r\n                        [symbol.toUpperCase()]: parseFloat(last).toFixed(2)\r\n                    }));\r\n                }\r\n            } catch (e) {\r\n                console.error(\"Error parsing Kraken message:\", e);\r\n            }\r\n        };\r\n\r\n        ws.onclose = () => console.log(\"Kraken WebSocket closed\");\r\n\r\n        return () => ws.close();\r\n    }, [pairs]);\r\n\r\n    return prices;\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,eAAe,SAASC,eAAeA,CAACC,KAAK,EAAE;EAAAC,EAAA;EAC3C,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGL,QAAQ,CAAC,CAAC,CAAC,CAAC;EAExCD,SAAS,CAAC,MAAM;IACZ,IAAI,CAACG,KAAK,IAAIA,KAAK,CAACI,MAAM,KAAK,CAAC,EAAE;IAElC,MAAMC,EAAE,GAAG,IAAIC,SAAS,CAAC,wBAAwB,CAAC;IAElDD,EAAE,CAACE,MAAM,GAAG,MAAM;MACdC,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;MAC/CJ,EAAE,CAACK,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;QACnBC,MAAM,EAAE,WAAW;QACnBC,MAAM,EAAE;UACJC,OAAO,EAAE,QAAQ;UACjBC,MAAM,EAAEhB,KAAK,CAACiB,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,WAAW,CAAC,CAAC;QAC1C;MACJ,CAAC,CAAC,CAAC;IACP,CAAC;IAEDd,EAAE,CAACe,SAAS,GAAIC,KAAK,IAAK;MACtB,IAAI;QACA,MAAMC,GAAG,GAAGX,IAAI,CAACY,KAAK,CAACF,KAAK,CAACG,IAAI,CAAC;;QAElC;QACA,IAAIF,GAAG,CAACP,OAAO,KAAK,QAAQ,IAAIO,GAAG,CAACG,IAAI,KAAK,QAAQ,EAAE;UACnD,MAAM;YAAET,MAAM;YAAEU;UAAK,CAAC,GAAGJ,GAAG,CAACE,IAAI,CAAC,CAAC,CAAC;UACpCrB,SAAS,CAACwB,IAAI,KAAK;YACf,GAAGA,IAAI;YACP,CAACX,MAAM,CAACY,WAAW,CAAC,CAAC,GAAGC,UAAU,CAACH,IAAI,CAAC,CAACI,OAAO,CAAC,CAAC;UACtD,CAAC,CAAC,CAAC;QACP;MACJ,CAAC,CAAC,OAAOC,CAAC,EAAE;QACRvB,OAAO,CAACwB,KAAK,CAAC,+BAA+B,EAAED,CAAC,CAAC;MACrD;IACJ,CAAC;IAED1B,EAAE,CAAC4B,OAAO,GAAG,MAAMzB,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;IAEzD,OAAO,MAAMJ,EAAE,CAAC6B,KAAK,CAAC,CAAC;EAC3B,CAAC,EAAE,CAAClC,KAAK,CAAC,CAAC;EAEX,OAAOE,MAAM;AACjB;AAACD,EAAA,CA1CuBF,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}