{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nexport default function useKrakenPrices(symbols) {\n  _s();\n  const [prices, setPrices] = useState({});\n  const wsRef = useRef(null);\n  useEffect(() => {\n    if (!(symbols !== null && symbols !== void 0 && symbols.length)) return;\n    const ws = new WebSocket(\"wss://ws.kraken.com/v2\");\n    wsRef.current = ws;\n    ws.onopen = () => {\n      console.log(\"Connected\");\n      ws.send(JSON.stringify({\n        method: \"subscribe\",\n        params: {\n          channel: \"ticker\",\n          symbol: symbols\n        }\n      }));\n    };\n    ws.onmessage = event => {\n      try {\n        const msg = JSON.parse(event.data);\n        if (msg.channel === \"ticker\") {\n          msg.data.forEach(item => {\n            const price = parseFloat(item.last);\n            if (!isNaN(price)) {\n              setPrices(prev => ({\n                ...prev,\n                [item.symbol]: price\n              }));\n            }\n          });\n        }\n      } catch (err) {\n        console.error(\"Parse error:\", err);\n      }\n    };\n    ws.onerror = err => {\n      console.error(\"❌ WebSocket error:\", err);\n    };\n    ws.onclose = e => {\n      console.warn(`❌ WebSocket closed: code=${e.code} reason=${e.reason}`);\n    };\n    return () => {\n      console.log(\"🔌 Closing Kraken WebSocket\");\n      ws.close();\n    };\n  }, [symbols === null || symbols === void 0 ? void 0 : symbols.join(\",\")]);\n  return prices;\n}\n_s(useKrakenPrices, \"DYnD9XYRtP7LbfpsQOygvOrrBHo=\");","map":{"version":3,"names":["useEffect","useRef","useState","useKrakenPrices","symbols","_s","prices","setPrices","wsRef","length","ws","WebSocket","current","onopen","console","log","send","JSON","stringify","method","params","channel","symbol","onmessage","event","msg","parse","data","forEach","item","price","parseFloat","last","isNaN","prev","err","error","onerror","onclose","e","warn","code","reason","close","join"],"sources":["C:/Users/User/Documents/Trading212/TradingSimulation/frontend/src/Cryptos/KrakenApi.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\n\r\nexport default function useKrakenPrices(symbols) {\r\n  const [prices, setPrices] = useState({});\r\n  const wsRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!symbols?.length) return;\r\n\r\n    const ws = new WebSocket(\"wss://ws.kraken.com/v2\");\r\n    wsRef.current = ws;\r\n\r\n    ws.onopen = () => {\r\n      console.log(\"Connected\");\r\n\r\n      ws.send(JSON.stringify({\r\n        method: \"subscribe\",\r\n        params: {\r\n          channel: \"ticker\",\r\n          symbol: symbols\r\n        }\r\n      }));\r\n    };\r\n\r\n    ws.onmessage = (event) => {\r\n      try {\r\n        const msg = JSON.parse(event.data);\r\n        if (msg.channel === \"ticker\") {\r\n          msg.data.forEach(item => {\r\n            const price = parseFloat(item.last);\r\n            if (!isNaN(price)) {\r\n              setPrices(prev => ({\r\n                ...prev,\r\n                [item.symbol]: price\r\n              }));\r\n            }\r\n          });\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Parse error:\", err);\r\n      }\r\n    };\r\n\r\n    ws.onerror = (err) => {\r\n      console.error(\"❌ WebSocket error:\", err);\r\n    };\r\n\r\n    ws.onclose = (e) => {\r\n      console.warn(`❌ WebSocket closed: code=${e.code} reason=${e.reason}`);\r\n    };\r\n\r\n    return () => {\r\n      console.log(\"🔌 Closing Kraken WebSocket\");\r\n      ws.close();\r\n    };\r\n  }, [symbols?.join(\",\")]);\r\n\r\n  return prices;\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAEnD,eAAe,SAASC,eAAeA,CAACC,OAAO,EAAE;EAAAC,EAAA;EAC/C,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGL,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxC,MAAMM,KAAK,GAAGP,MAAM,CAAC,IAAI,CAAC;EAE1BD,SAAS,CAAC,MAAM;IACd,IAAI,EAACI,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEK,MAAM,GAAE;IAEtB,MAAMC,EAAE,GAAG,IAAIC,SAAS,CAAC,wBAAwB,CAAC;IAClDH,KAAK,CAACI,OAAO,GAAGF,EAAE;IAElBA,EAAE,CAACG,MAAM,GAAG,MAAM;MAChBC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;MAExBL,EAAE,CAACM,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;QACrBC,MAAM,EAAE,WAAW;QACnBC,MAAM,EAAE;UACNC,OAAO,EAAE,QAAQ;UACjBC,MAAM,EAAElB;QACV;MACF,CAAC,CAAC,CAAC;IACL,CAAC;IAEDM,EAAE,CAACa,SAAS,GAAIC,KAAK,IAAK;MACxB,IAAI;QACF,MAAMC,GAAG,GAAGR,IAAI,CAACS,KAAK,CAACF,KAAK,CAACG,IAAI,CAAC;QAClC,IAAIF,GAAG,CAACJ,OAAO,KAAK,QAAQ,EAAE;UAC5BI,GAAG,CAACE,IAAI,CAACC,OAAO,CAACC,IAAI,IAAI;YACvB,MAAMC,KAAK,GAAGC,UAAU,CAACF,IAAI,CAACG,IAAI,CAAC;YACnC,IAAI,CAACC,KAAK,CAACH,KAAK,CAAC,EAAE;cACjBvB,SAAS,CAAC2B,IAAI,KAAK;gBACjB,GAAGA,IAAI;gBACP,CAACL,IAAI,CAACP,MAAM,GAAGQ;cACjB,CAAC,CAAC,CAAC;YACL;UACF,CAAC,CAAC;QACJ;MACF,CAAC,CAAC,OAAOK,GAAG,EAAE;QACZrB,OAAO,CAACsB,KAAK,CAAC,cAAc,EAAED,GAAG,CAAC;MACpC;IACF,CAAC;IAEDzB,EAAE,CAAC2B,OAAO,GAAIF,GAAG,IAAK;MACpBrB,OAAO,CAACsB,KAAK,CAAC,oBAAoB,EAAED,GAAG,CAAC;IAC1C,CAAC;IAEDzB,EAAE,CAAC4B,OAAO,GAAIC,CAAC,IAAK;MAClBzB,OAAO,CAAC0B,IAAI,CAAC,4BAA4BD,CAAC,CAACE,IAAI,WAAWF,CAAC,CAACG,MAAM,EAAE,CAAC;IACvE,CAAC;IAED,OAAO,MAAM;MACX5B,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;MAC1CL,EAAE,CAACiC,KAAK,CAAC,CAAC;IACZ,CAAC;EACH,CAAC,EAAE,CAACvC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEwC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;EAExB,OAAOtC,MAAM;AACf;AAACD,EAAA,CAxDuBF,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}