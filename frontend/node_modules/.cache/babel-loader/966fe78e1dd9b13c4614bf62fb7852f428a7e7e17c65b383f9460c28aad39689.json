{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nexport default function useKrakenPrices(pairs) {\n  _s();\n  const [prices, setPrices] = useState({});\n  useEffect(() => {\n    const ws = new WebSocket(\"wss://ws.kraken.com/\");\n    ws.onopen = () => {\n      console.log(\"Connected to Kraken WebSocket\");\n\n      // Kraken иска lowercase за symbol и без /\n      const subscribeData = {\n        event: \"subscribe\",\n        pair: pairs,\n        subscription: {\n          name: \"ticker\"\n        }\n      };\n      ws.send(JSON.stringify(subscribeData));\n    };\n    ws.onmessage = event => {\n      try {\n        var _data$;\n        const data = JSON.parse(event.data);\n\n        // Проверяваме дали е ticker update\n        if (Array.isArray(data) && (_data$ = data[1]) !== null && _data$ !== void 0 && _data$.c) {\n          const pair = data[3];\n          const price = data[1].c[0]; // last trade price\n          setPrices(prev => ({\n            ...prev,\n            [pair]: parseFloat(price).toFixed(2)\n          }));\n        }\n      } catch (err) {\n        console.error(\"Error parsing WS message:\", err);\n      }\n    };\n    ws.onclose = () => {\n      console.log(\"Disconnected from Kraken WebSocket\");\n    };\n    return () => ws.close();\n  }, [pairs]);\n  return prices;\n}\n_s(useKrakenPrices, \"AyDZng7+aEBipOGwqaguTBzobZI=\");","map":{"version":3,"names":["useEffect","useState","useKrakenPrices","pairs","_s","prices","setPrices","ws","WebSocket","onopen","console","log","subscribeData","event","pair","subscription","name","send","JSON","stringify","onmessage","_data$","data","parse","Array","isArray","c","price","prev","parseFloat","toFixed","err","error","onclose","close"],"sources":["C:/Users/User/Documents/Trading212/TradingSimulation/frontend/src/KrackenApi.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nexport default function useKrakenPrices(pairs) {\r\n    const [prices, setPrices] = useState({});\r\n\r\n    useEffect(() => {\r\n        const ws = new WebSocket(\"wss://ws.kraken.com/\");\r\n\r\n        ws.onopen = () => {\r\n            console.log(\"Connected to Kraken WebSocket\");\r\n\r\n            // Kraken иска lowercase за symbol и без /\r\n            const subscribeData = {\r\n                event: \"subscribe\",\r\n                pair: pairs,\r\n                subscription: { name: \"ticker\" }\r\n            };\r\n\r\n            ws.send(JSON.stringify(subscribeData));\r\n        };\r\n\r\n        ws.onmessage = (event) => {\r\n            try {\r\n                const data = JSON.parse(event.data);\r\n\r\n                // Проверяваме дали е ticker update\r\n                if (Array.isArray(data) && data[1]?.c) {\r\n                    const pair = data[3];\r\n                    const price = data[1].c[0]; // last trade price\r\n                    setPrices(prev => ({\r\n                        ...prev,\r\n                        [pair]: parseFloat(price).toFixed(2)\r\n                    }));\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Error parsing WS message:\", err);\r\n            }\r\n        };\r\n\r\n        ws.onclose = () => {\r\n            console.log(\"Disconnected from Kraken WebSocket\");\r\n        };\r\n\r\n        return () => ws.close();\r\n    }, [pairs]);\r\n\r\n    return prices;\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,eAAe,SAASC,eAAeA,CAACC,KAAK,EAAE;EAAAC,EAAA;EAC3C,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGL,QAAQ,CAAC,CAAC,CAAC,CAAC;EAExCD,SAAS,CAAC,MAAM;IACZ,MAAMO,EAAE,GAAG,IAAIC,SAAS,CAAC,sBAAsB,CAAC;IAEhDD,EAAE,CAACE,MAAM,GAAG,MAAM;MACdC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;;MAE5C;MACA,MAAMC,aAAa,GAAG;QAClBC,KAAK,EAAE,WAAW;QAClBC,IAAI,EAAEX,KAAK;QACXY,YAAY,EAAE;UAAEC,IAAI,EAAE;QAAS;MACnC,CAAC;MAEDT,EAAE,CAACU,IAAI,CAACC,IAAI,CAACC,SAAS,CAACP,aAAa,CAAC,CAAC;IAC1C,CAAC;IAEDL,EAAE,CAACa,SAAS,GAAIP,KAAK,IAAK;MACtB,IAAI;QAAA,IAAAQ,MAAA;QACA,MAAMC,IAAI,GAAGJ,IAAI,CAACK,KAAK,CAACV,KAAK,CAACS,IAAI,CAAC;;QAEnC;QACA,IAAIE,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,KAAAD,MAAA,GAAIC,IAAI,CAAC,CAAC,CAAC,cAAAD,MAAA,eAAPA,MAAA,CAASK,CAAC,EAAE;UACnC,MAAMZ,IAAI,GAAGQ,IAAI,CAAC,CAAC,CAAC;UACpB,MAAMK,KAAK,GAAGL,IAAI,CAAC,CAAC,CAAC,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UAC5BpB,SAAS,CAACsB,IAAI,KAAK;YACf,GAAGA,IAAI;YACP,CAACd,IAAI,GAAGe,UAAU,CAACF,KAAK,CAAC,CAACG,OAAO,CAAC,CAAC;UACvC,CAAC,CAAC,CAAC;QACP;MACJ,CAAC,CAAC,OAAOC,GAAG,EAAE;QACVrB,OAAO,CAACsB,KAAK,CAAC,2BAA2B,EAAED,GAAG,CAAC;MACnD;IACJ,CAAC;IAEDxB,EAAE,CAAC0B,OAAO,GAAG,MAAM;MACfvB,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC;IACrD,CAAC;IAED,OAAO,MAAMJ,EAAE,CAAC2B,KAAK,CAAC,CAAC;EAC3B,CAAC,EAAE,CAAC/B,KAAK,CAAC,CAAC;EAEX,OAAOE,MAAM;AACjB;AAACD,EAAA,CA7CuBF,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}