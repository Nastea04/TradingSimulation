{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nexport default function useKrakenPrices(symbols) {\n  _s();\n  const [prices, setPrices] = useState({});\n  const wsRef = useRef(null);\n  useEffect(() => {\n    var _wsRef$current;\n    if (!wsRef.current) {\n      const ws = new WebSocket(\"wss://ws.kraken.com/v2\");\n      wsRef.current = ws;\n      ws.onopen = () => {\n        console.log(\"‚úÖ Connected to Kraken\");\n        if (symbols.length) {\n          ws.send(JSON.stringify({\n            method: \"subscribe\",\n            params: {\n              channel: \"ticker\",\n              symbol: symbols\n            }\n          }));\n        }\n      };\n      ws.onmessage = event => {\n        try {\n          var _msg$data;\n          const msg = JSON.parse(event.data);\n          console.log(\"üì® RAW:\", msg); // <-- —â–µ –≤–∏–¥–∏–º —Ä–µ–∞–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏\n\n          if (msg.channel === \"ticker\" && (_msg$data = msg.data) !== null && _msg$data !== void 0 && _msg$data.length) {\n            const s = msg.data[0].symbol;\n            const last = msg.data[0].last; // —á–∏—Å–ª–æ\n            setPrices(prev => ({\n              ...prev,\n              [s]: parseFloat(last)\n            }));\n          }\n        } catch (err) {\n          console.error(\"Parse error:\", err);\n        }\n      };\n      ws.onclose = () => console.warn(\"‚ùå Disconnected from Kraken\");\n      ws.onerror = err => console.error(\"WS Error:\", err);\n    }\n\n    // üìå –ü—Ä–∏ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ —Å–∏–º–≤–æ–ª–∏—Ç–µ ‚Äî –∏–∑–ø—Ä–∞—â–∞–º–µ –Ω–æ–≤ subscribe\n    if (((_wsRef$current = wsRef.current) === null || _wsRef$current === void 0 ? void 0 : _wsRef$current.readyState) === WebSocket.OPEN && symbols.length) {\n      wsRef.current.send(JSON.stringify({\n        method: \"subscribe\",\n        params: {\n          channel: \"ticker\",\n          symbol: symbols\n        }\n      }));\n    }\n  }, [symbols]);\n  return prices;\n}\n_s(useKrakenPrices, \"DYnD9XYRtP7LbfpsQOygvOrrBHo=\");","map":{"version":3,"names":["useEffect","useRef","useState","useKrakenPrices","symbols","_s","prices","setPrices","wsRef","_wsRef$current","current","ws","WebSocket","onopen","console","log","length","send","JSON","stringify","method","params","channel","symbol","onmessage","event","_msg$data","msg","parse","data","s","last","prev","parseFloat","err","error","onclose","warn","onerror","readyState","OPEN"],"sources":["C:/Users/User/Documents/Trading212/TradingSimulation/frontend/src/Cryptos/KrakenApi.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\n\r\nexport default function useKrakenPrices(symbols) {\r\n    const [prices, setPrices] = useState({});\r\n    const wsRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (!wsRef.current) {\r\n            const ws = new WebSocket(\"wss://ws.kraken.com/v2\");\r\n            wsRef.current = ws;\r\n\r\n            ws.onopen = () => {\r\n                console.log(\"‚úÖ Connected to Kraken\");\r\n                if (symbols.length) {\r\n                    ws.send(JSON.stringify({\r\n                        method: \"subscribe\",\r\n                        params: { channel: \"ticker\", symbol: symbols }\r\n                    }));\r\n                }\r\n            };\r\n\r\n            ws.onmessage = (event) => {\r\n                try {\r\n                    const msg = JSON.parse(event.data);\r\n                    console.log(\"üì® RAW:\", msg); // <-- —â–µ –≤–∏–¥–∏–º —Ä–µ–∞–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏\r\n\r\n                    if (msg.channel === \"ticker\" && msg.data?.length) {\r\n                        const s = msg.data[0].symbol;\r\n                        const last = msg.data[0].last; // —á–∏—Å–ª–æ\r\n                        setPrices(prev => ({\r\n                            ...prev,\r\n                            [s]: parseFloat(last)\r\n                        }));\r\n                    }\r\n                } catch (err) {\r\n                    console.error(\"Parse error:\", err);\r\n                }\r\n            };\r\n\r\n            ws.onclose = () => console.warn(\"‚ùå Disconnected from Kraken\");\r\n            ws.onerror = (err) => console.error(\"WS Error:\", err);\r\n        }\r\n\r\n        // üìå –ü—Ä–∏ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ —Å–∏–º–≤–æ–ª–∏—Ç–µ ‚Äî –∏–∑–ø—Ä–∞—â–∞–º–µ –Ω–æ–≤ subscribe\r\n        if (wsRef.current?.readyState === WebSocket.OPEN && symbols.length) {\r\n            wsRef.current.send(JSON.stringify({\r\n                method: \"subscribe\",\r\n                params: { channel: \"ticker\", symbol: symbols }\r\n            }));\r\n        }\r\n    }, [symbols]);\r\n\r\n    return prices;\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAEnD,eAAe,SAASC,eAAeA,CAACC,OAAO,EAAE;EAAAC,EAAA;EAC7C,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGL,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxC,MAAMM,KAAK,GAAGP,MAAM,CAAC,IAAI,CAAC;EAE1BD,SAAS,CAAC,MAAM;IAAA,IAAAS,cAAA;IACZ,IAAI,CAACD,KAAK,CAACE,OAAO,EAAE;MAChB,MAAMC,EAAE,GAAG,IAAIC,SAAS,CAAC,wBAAwB,CAAC;MAClDJ,KAAK,CAACE,OAAO,GAAGC,EAAE;MAElBA,EAAE,CAACE,MAAM,GAAG,MAAM;QACdC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;QACpC,IAAIX,OAAO,CAACY,MAAM,EAAE;UAChBL,EAAE,CAACM,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;YACnBC,MAAM,EAAE,WAAW;YACnBC,MAAM,EAAE;cAAEC,OAAO,EAAE,QAAQ;cAAEC,MAAM,EAAEnB;YAAQ;UACjD,CAAC,CAAC,CAAC;QACP;MACJ,CAAC;MAEDO,EAAE,CAACa,SAAS,GAAIC,KAAK,IAAK;QACtB,IAAI;UAAA,IAAAC,SAAA;UACA,MAAMC,GAAG,GAAGT,IAAI,CAACU,KAAK,CAACH,KAAK,CAACI,IAAI,CAAC;UAClCf,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEY,GAAG,CAAC,CAAC,CAAC;;UAE7B,IAAIA,GAAG,CAACL,OAAO,KAAK,QAAQ,KAAAI,SAAA,GAAIC,GAAG,CAACE,IAAI,cAAAH,SAAA,eAARA,SAAA,CAAUV,MAAM,EAAE;YAC9C,MAAMc,CAAC,GAAGH,GAAG,CAACE,IAAI,CAAC,CAAC,CAAC,CAACN,MAAM;YAC5B,MAAMQ,IAAI,GAAGJ,GAAG,CAACE,IAAI,CAAC,CAAC,CAAC,CAACE,IAAI,CAAC,CAAC;YAC/BxB,SAAS,CAACyB,IAAI,KAAK;cACf,GAAGA,IAAI;cACP,CAACF,CAAC,GAAGG,UAAU,CAACF,IAAI;YACxB,CAAC,CAAC,CAAC;UACP;QACJ,CAAC,CAAC,OAAOG,GAAG,EAAE;UACVpB,OAAO,CAACqB,KAAK,CAAC,cAAc,EAAED,GAAG,CAAC;QACtC;MACJ,CAAC;MAEDvB,EAAE,CAACyB,OAAO,GAAG,MAAMtB,OAAO,CAACuB,IAAI,CAAC,4BAA4B,CAAC;MAC7D1B,EAAE,CAAC2B,OAAO,GAAIJ,GAAG,IAAKpB,OAAO,CAACqB,KAAK,CAAC,WAAW,EAAED,GAAG,CAAC;IACzD;;IAEA;IACA,IAAI,EAAAzB,cAAA,GAAAD,KAAK,CAACE,OAAO,cAAAD,cAAA,uBAAbA,cAAA,CAAe8B,UAAU,MAAK3B,SAAS,CAAC4B,IAAI,IAAIpC,OAAO,CAACY,MAAM,EAAE;MAChER,KAAK,CAACE,OAAO,CAACO,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;QAC9BC,MAAM,EAAE,WAAW;QACnBC,MAAM,EAAE;UAAEC,OAAO,EAAE,QAAQ;UAAEC,MAAM,EAAEnB;QAAQ;MACjD,CAAC,CAAC,CAAC;IACP;EACJ,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;EAEb,OAAOE,MAAM;AACjB;AAACD,EAAA,CAnDuBF,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}