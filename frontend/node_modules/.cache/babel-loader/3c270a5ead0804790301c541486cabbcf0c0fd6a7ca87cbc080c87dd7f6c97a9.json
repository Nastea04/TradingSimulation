{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from 'react';\nexport default function useKrakenPrices(symbols = []) {\n  _s();\n  const [prices, setPrices] = useState({});\n  const wsRef = useRef(null);\n  const reconnectTimeout = useRef(null);\n  useEffect(() => {\n    if (!symbols.length) return;\n    const connect = () => {\n      const ws = new WebSocket('wss://ws.kraken.com/v2');\n      wsRef.current = ws;\n      ws.onopen = () => {\n        ws.send(JSON.stringify({\n          method: 'subscribe',\n          params: {\n            channel: 'ticker',\n            symbol: symbols\n          }\n        }));\n      };\n      ws.onmessage = evt => {\n        const msg = JSON.parse(evt.data);\n        if (msg.channel !== 'ticker' || !msg.data) return;\n        msg.data.forEach(item => {\n          const {\n            symbol,\n            last\n          } = item;\n          setPrices(prev => ({\n            ...prev,\n            [symbol]: parseFloat(last)\n          }));\n        });\n      };\n      ws.onclose = e => {\n        console.error('WebSocket closed:', e);\n        reconnectTimeout.current = setTimeout(connect, 2000);\n      };\n      ws.onerror = err => {\n        console.error('WebSocket error:', err);\n        ws.close();\n      };\n    };\n    connect();\n    return () => {\n      clearTimeout(reconnectTimeout.current);\n      wsRef.current && wsRef.current.close();\n    };\n  }, [symbols]);\n  return prices;\n}\n_s(useKrakenPrices, \"v1QPjdHvxhnR9P2V5kYBK6zZMds=\");","map":{"version":3,"names":["useEffect","useState","useRef","useKrakenPrices","symbols","_s","prices","setPrices","wsRef","reconnectTimeout","length","connect","ws","WebSocket","current","onopen","send","JSON","stringify","method","params","channel","symbol","onmessage","evt","msg","parse","data","forEach","item","last","prev","parseFloat","onclose","e","console","error","setTimeout","onerror","err","close","clearTimeout"],"sources":["C:/Users/User/Documents/Trading212/TradingSimulation/frontend/src/Cryptos/KrakenApi.js"],"sourcesContent":["import { useEffect, useState, useRef } from 'react';\r\n\r\nexport default function useKrakenPrices(symbols = []) {\r\n  const [prices, setPrices] = useState({});\r\n  const wsRef = useRef(null);\r\n  const reconnectTimeout = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!symbols.length) return;\r\n\r\n    const connect = () => {\r\n      const ws = new WebSocket('wss://ws.kraken.com/v2');\r\n      wsRef.current = ws;\r\n\r\n      ws.onopen = () => {\r\n        ws.send(JSON.stringify({\r\n          method: 'subscribe',\r\n          params: { channel: 'ticker', symbol: symbols }\r\n        }));\r\n      };\r\n\r\n      ws.onmessage = evt => {\r\n        const msg = JSON.parse(evt.data);\r\n        if (msg.channel !== 'ticker' || !msg.data) return;\r\n\r\n        msg.data.forEach(item => {\r\n          const { symbol, last } = item;\r\n          setPrices(prev => ({ ...prev, [symbol]: parseFloat(last) }));\r\n        });\r\n      };\r\n\r\n      ws.onclose = e => {\r\n        console.error('WebSocket closed:', e);\r\n        reconnectTimeout.current = setTimeout(connect, 2000);\r\n      };\r\n\r\n      ws.onerror = err => {\r\n        console.error('WebSocket error:', err);\r\n        ws.close();\r\n      };\r\n    };\r\n\r\n    connect();\r\n\r\n    return () => {\r\n      clearTimeout(reconnectTimeout.current);\r\n      wsRef.current && wsRef.current.close();\r\n    };\r\n  }, [symbols]);\r\n\r\n  return prices;\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAEnD,eAAe,SAASC,eAAeA,CAACC,OAAO,GAAG,EAAE,EAAE;EAAAC,EAAA;EACpD,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGN,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxC,MAAMO,KAAK,GAAGN,MAAM,CAAC,IAAI,CAAC;EAC1B,MAAMO,gBAAgB,GAAGP,MAAM,CAAC,IAAI,CAAC;EAErCF,SAAS,CAAC,MAAM;IACd,IAAI,CAACI,OAAO,CAACM,MAAM,EAAE;IAErB,MAAMC,OAAO,GAAGA,CAAA,KAAM;MACpB,MAAMC,EAAE,GAAG,IAAIC,SAAS,CAAC,wBAAwB,CAAC;MAClDL,KAAK,CAACM,OAAO,GAAGF,EAAE;MAElBA,EAAE,CAACG,MAAM,GAAG,MAAM;QAChBH,EAAE,CAACI,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;UACrBC,MAAM,EAAE,WAAW;UACnBC,MAAM,EAAE;YAAEC,OAAO,EAAE,QAAQ;YAAEC,MAAM,EAAElB;UAAQ;QAC/C,CAAC,CAAC,CAAC;MACL,CAAC;MAEDQ,EAAE,CAACW,SAAS,GAAGC,GAAG,IAAI;QACpB,MAAMC,GAAG,GAAGR,IAAI,CAACS,KAAK,CAACF,GAAG,CAACG,IAAI,CAAC;QAChC,IAAIF,GAAG,CAACJ,OAAO,KAAK,QAAQ,IAAI,CAACI,GAAG,CAACE,IAAI,EAAE;QAE3CF,GAAG,CAACE,IAAI,CAACC,OAAO,CAACC,IAAI,IAAI;UACvB,MAAM;YAAEP,MAAM;YAAEQ;UAAK,CAAC,GAAGD,IAAI;UAC7BtB,SAAS,CAACwB,IAAI,KAAK;YAAE,GAAGA,IAAI;YAAE,CAACT,MAAM,GAAGU,UAAU,CAACF,IAAI;UAAE,CAAC,CAAC,CAAC;QAC9D,CAAC,CAAC;MACJ,CAAC;MAEDlB,EAAE,CAACqB,OAAO,GAAGC,CAAC,IAAI;QAChBC,OAAO,CAACC,KAAK,CAAC,mBAAmB,EAAEF,CAAC,CAAC;QACrCzB,gBAAgB,CAACK,OAAO,GAAGuB,UAAU,CAAC1B,OAAO,EAAE,IAAI,CAAC;MACtD,CAAC;MAEDC,EAAE,CAAC0B,OAAO,GAAGC,GAAG,IAAI;QAClBJ,OAAO,CAACC,KAAK,CAAC,kBAAkB,EAAEG,GAAG,CAAC;QACtC3B,EAAE,CAAC4B,KAAK,CAAC,CAAC;MACZ,CAAC;IACH,CAAC;IAED7B,OAAO,CAAC,CAAC;IAET,OAAO,MAAM;MACX8B,YAAY,CAAChC,gBAAgB,CAACK,OAAO,CAAC;MACtCN,KAAK,CAACM,OAAO,IAAIN,KAAK,CAACM,OAAO,CAAC0B,KAAK,CAAC,CAAC;IACxC,CAAC;EACH,CAAC,EAAE,CAACpC,OAAO,CAAC,CAAC;EAEb,OAAOE,MAAM;AACf;AAACD,EAAA,CAjDuBF,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}